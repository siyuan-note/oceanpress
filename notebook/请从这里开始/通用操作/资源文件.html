<!DOCTYPE html>
<html lang="zh_CN" data-theme-mode="light" data-light-theme="daylight" data-dark-theme="midnight">
<head>
  
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/>
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  <link rel="stylesheet" type="text/css" id="baseStyle" href="../../stage/build/export/base.css?2.10.5"/>
  <script>
  function isNightTime() {
    const currentHour = new Date().getHours();
    return currentHour >= 18 || currentHour < 6;
  }
  document.write('<link rel="stylesheet" type="text/css" id="themeDefaultStyle" href="../../appearance/themes/'+(isNightTime()?'midnight':'daylight')+'/theme.css?2.10.5"/>');
  </script>
  <link rel="stylesheet" type="text/css" href="../../appearance/oceanpress.css"/>
  <title>资源文件</title>
</head>
<body>
  
  <div class="protyle-wysiwyg protyle-wysiwyg--attr" id="preview">
  <div style="min-height: 150px;" id="20200915214115-42b8zma" data-node-id="20200915214115-42b8zma" data-type="NodeDocument" updated="20231110112936" data-subtype="h1" class="h1" type="doc"></div><div id="20200915214115-42b8zma" data-node-id="20200915214115-42b8zma" data-type="NodeDocument" updated="20231110112936" data-subtype="h1" class="h1" type="doc" data-type="NodeHeading" class="h1">资源文件</div><div id="20210503095355-r83044o" data-node-id="20210503095355-r83044o" data-type="NodeHeading" updated="20210503095726" data-subtype="h2" class="h2"><div>
概述
</div></div>
<div id="20210503095358-zr3uijl" data-node-id="20210503095358-zr3uijl" data-type="NodeParagraph" updated="20220711121657" class="p">通过编辑器插入的附件会被认为是资源文件，默认放置在 
<span data-type="code">工作空间/data/assets/</span>
 文件夹下。
</div>
<div id="20201210194734-lr6v0s2" data-node-id="20201210194734-lr6v0s2" data-type="NodeHeading" updated="20220824171919" data-subtype="h2" class="h2"><div>插入图片或文件
</div></div>
<div id="20210104091255-8s7avcx" data-node-id="20210104091255-8s7avcx" data-type="NodeParagraph" updated="20220905215650" class="p">在编辑器中可以直接粘贴系统剪切板中复制好的图片或文件（Linux 端不支持），或者通过拖拽图片或文件到编辑器中也可以实现插入。插入时有两个选择：
</div>
<div id="20220824172203-etwu4qu" data-node-id="20220824172203-etwu4qu" data-type="NodeList" updated="20220902215702" data-subtype="u" class="list"><div id="20220824172204-xxh346y" data-node-id="20220824172204-xxh346y" data-type="NodeListItem" updated="20220824172527" data-subtype="u" class="li" data-marker="*">
      <div class="protyle-action">
        <svg><use xlink:href="#iconDot"></use></svg>
      </div>
      <div id="20220824172204-fct1t0t" data-node-id="20220824172204-fct1t0t" data-type="NodeParagraph" updated="20220824172527" class="p"><span data-type="kbd">复制为资源文件并插入</span>
：将图片或文件复制为资源文件并插入，快捷键 
<span data-type="kbd">Ctrl+V</span>
</div>

    </div>
<div id="20220824172403-agsj358" data-node-id="20220824172403-agsj358" data-type="NodeListItem" updated="20220902215702" data-subtype="u" class="li" data-marker="*">
      <div class="protyle-action">
        <svg><use xlink:href="#iconDot"></use></svg>
      </div>
      <div id="20220824172403-0fkrw8o" data-node-id="20220824172403-0fkrw8o" data-type="NodeParagraph" updated="20220902215702" class="p"><span data-type="kbd">使用 file:// 绝对路径并链接</span>
：将图片或文件以本地绝对路径方式插入超链接，快捷键 
<span data-type="kbd">Ctrl+Shift+V</span>
，或者按住 
<span data-type="kbd">Alt</span>
 后拖入
</div>

    </div>
</div>
<div id="20210104091255-7fwvx7a" data-node-id="20210104091255-7fwvx7a" data-type="NodeParagraph" updated="20220824172301" class="p">对于图片，如果排版时指定了图片标题，则标题会被渲染在图片下方作为图注。
</div>
<div id="20210512171633-u3iy2xx" data-node-id="20210512171633-u3iy2xx" data-type="NodeParagraph" updated="20230505083901" class="p"><span data-type="NodeImage" class="img" parent-style="display: block;" style="display: block;" style="display: block;"
      ><img
        src="./../../assets/siyuan-128-20210604092205-djd749a.png"
        data-src="./../../assets/siyuan-128-20210604092205-djd749a.png"
        title="源于思考，饮水思源"
        style="display: block;"
        loading="lazy"
      /><span class="protyle-action__title">源于思考，饮水思源</span></span
    >

</div>
<div id="20230505083902-s5e711d" data-node-id="20230505083902-s5e711d" data-type="NodeParagraph" updated="20230505083923" class="p">​
<span data-type="tag">注意</span>
​：插入图片不会进行压缩处理，所有图片和文件都以原始数据进行保存。
</div>
<div id="20210115222011-bzsftun" data-node-id="20210115222011-bzsftun" data-type="NodeHeading" data-subtype="h2" class="h2"><div>
清理未引用资源
</div></div>
<div id="20210115222053-i62ppkz" data-node-id="20210115222053-i62ppkz" data-type="NodeParagraph" updated="20210503095856" class="p">“引用”指的是通过超链接、插入图片或者 HTML 标签（例如 
<span data-type="code">&lt;img&gt;</span>
 、
<span data-type="code">&lt;iframe&gt;</span>
）的属性 
<span data-type="code">src</span>
 对资源文件进行链接。这里分为两种情况：
</div>
<div id="20210115222514-tqfsawm" data-node-id="20210115222514-tqfsawm" data-type="NodeList" updated="20220711121929" data-subtype="o" class="list" data-marker="1"><div id="20210115222515-47r5lop" data-node-id="20210115222515-47r5lop" data-type="NodeListItem" updated="20220711121929" data-subtype="o" class="li" data-marker="1">
      <div class="protyle-action">
        1
      </div>
      <div id="20210204172443-a8xpkb9" data-node-id="20210204172443-a8xpkb9" data-type="NodeParagraph" updated="20220711121929" class="p">引用具体的资源文件，比如图片或者文件。如果资源文件是 PDF 且做过
标注
，那么无论它是否被引用都不会计入清理
</div>

    </div>
<div id="20210115222545-nilj84d" data-node-id="20210115222545-nilj84d" data-type="NodeListItem" updated="20220711121528" data-subtype="o" class="li" data-marker="2">
      <div class="protyle-action">
        2
      </div>
      <div id="20210204172443-zyll68d" data-node-id="20210204172443-zyll68d" data-type="NodeParagraph" updated="20220711121528" class="p">引用资源文件夹（在 assets 文件夹下的子文件夹），必须以 
<span data-type="code">/</span>
 结尾，比如 
<span data-type="code">[foo](assets/bar/)</span>
。一个资源文件夹如果被引用，则下面所有资源文件无论是否被单独引用，都会被算作已经引用
</div>

    </div>
</div>
<div id="20210115223610-ffnxstf" data-node-id="20210115223610-ffnxstf" data-type="NodeParagraph" updated="20220711122042" class="p">在 
<span data-type="kbd">设置</span>
 - 
<span data-type="kbd">资源</span>
 中可以一键
清理未引用资源
，如果需要找回被误删的文件，请通过
回滚
。
</div>
<div id="20210130103406-8jfbo6k" data-node-id="20210130103406-8jfbo6k" data-type="NodeParagraph" updated="20210512160659" class="p">​
<span data-type="tag">注意</span>
​：使用绝对路径（本地路径或者是网络路径）不会纳入清理计算。
</div>
<div id="20230604115545-plxx5iu" data-node-id="20230604115545-plxx5iu" data-type="NodeHeading" updated="20230604115551" data-subtype="h2" class="h2"><div>查看丢失资源
</div></div>
<div id="20230604115552-qqg9s4j" data-node-id="20230604115552-qqg9s4j" data-type="NodeParagraph" updated="20230604115947" class="p">在
<span data-type="kbd">设置</span>
​ - 
<span data-type="kbd">资源</span>
​ 中可以查看丢失的资源，复制路径后可以在全局搜索中找到引用处。
</div>
<div id="20230604115950-hru51yy" data-node-id="20230604115950-hru51yy" data-type="NodeParagraph" updated="20230604120815" class="p">​
<span data-type="tag">注意</span>
​：搜索资源文件路径需要先启用 
<span data-type="kbd">设置</span>
​ - 
<span data-type="kbd">搜索</span>
​ - 
<span data-type="kbd">索引</span>
​ - 
<span data-type="kbd">资源文件路径</span>
​。
</div>
<div id="20210615102657-kampx8a" data-node-id="20210615102657-kampx8a" data-type="NodeHeading" updated="20220503121605" data-subtype="h2" class="h2"><div>笔记本级资源文件
</div></div>
<div id="20210615102703-7wghhgm" data-node-id="20210615102703-7wghhgm" data-type="NodeParagraph" updated="20210626153454" class="p">如果需要默认将插入的资源文件放置在文档同级 assets 文件夹下，则需要先手动创建名为 assets 的文件夹，这样思源会优先选择该 assets 文件夹来存放资源文件。
</div>
<div id="20220503120950-4e9vwxq" data-node-id="20220503120950-4e9vwxq" data-type="NodeParagraph" updated="20220503121613" class="p">建议尽量不要使用笔记本级资源文件，因为这会带来一些副作用：
</div>
<div id="20220503121213-afjyt05" data-node-id="20220503121213-afjyt05" data-type="NodeList" updated="20220715105016" data-subtype="u" class="list"><div id="20220503121214-haxyvyt" data-node-id="20220503121214-haxyvyt" data-type="NodeListItem" updated="20220503121401" data-subtype="u" class="li" data-marker="*">
      <div class="protyle-action">
        <svg><use xlink:href="#iconDot"></use></svg>
      </div>
      <div id="20220503121214-cmqtvby" data-node-id="20220503121214-cmqtvby" data-type="NodeParagraph" updated="20220503121401" class="p">删除该笔记本时，为保证跨笔记本资源文件引用正常工作，该笔记本下的资源文件会被批量复制到全局 
assets
 中
</div>

    </div>
<div id="20220503121359-3hqko22" data-node-id="20220503121359-3hqko22" data-type="NodeListItem" updated="20220503121834" data-subtype="u" class="li" data-marker="*">
      <div class="protyle-action">
        <svg><use xlink:href="#iconDot"></use></svg>
      </div>
      <div id="20220503121359-amc47nl" data-node-id="20220503121359-amc47nl" data-type="NodeParagraph" updated="20220503121834" class="p">不支持在
数据历史
中查看笔记本级资源文件历史
</div>

    </div>
<div id="20220715092717-dbd9ih9" data-node-id="20220715092717-dbd9ih9" data-type="NodeListItem" updated="20220715092726" data-subtype="u" class="li" data-marker="*">
      <div class="protyle-action">
        <svg><use xlink:href="#iconDot"></use></svg>
      </div>
      <div id="20220715092717-btrw2bk" data-node-id="20220715092717-btrw2bk" data-type="NodeParagraph" updated="20220715092726" class="p">不支持使用 
<span data-type="code">/资源</span>
 搜索
</div>

    </div>
<div id="20220715105014-5jfe0bz" data-node-id="20220715105014-5jfe0bz" data-type="NodeListItem" updated="20220715105016" data-subtype="u" class="li" data-marker="*">
      <div class="protyle-action">
        <svg><use xlink:href="#iconDot"></use></svg>
      </div>
      <div id="20220715105014-3r1es71" data-node-id="20220715105014-3r1es71" data-type="NodeParagraph" updated="20220715105016" class="p">不支持重命名
</div>

    </div>
</div>
<div id="20230117002036-vmc0mx4" data-node-id="20230117002036-vmc0mx4" data-type="NodeHeading" updated="20230117002509" data-subtype="h2" class="h2"><div>图片 OCR 提取文本
</div></div>
<div id="20230117002059-ssmlejt" data-node-id="20230117002059-ssmlejt" data-type="NodeParagraph" updated="20230820185522" class="p">该特性仅在桌面端支持，并且需要先手动安装 
<span data-type="em">Tesseract OCR</span>
 程序。
</div>
<div id="20230202231304-22lvszc" data-node-id="20230202231304-22lvszc" data-type="NodeParagraph" updated="20230202231309" class="p">​
<span data-type="tag">注意</span>
​：
</div>
<div id="20230202231309-pcjl7c2" data-node-id="20230202231309-pcjl7c2" data-type="NodeList" updated="20231110112936" data-subtype="u" class="list"><div id="20230202231311-7qdk1za" data-node-id="20230202231311-7qdk1za" data-type="NodeListItem" updated="20231110112936" data-subtype="u" class="li" data-marker="*">
      <div class="protyle-action">
        <svg><use xlink:href="#iconDot"></use></svg>
      </div>
      <div id="20230202231311-n1pf7in" data-node-id="20230202231311-n1pf7in" data-type="NodeParagraph" updated="20231110112936" class="p">在安装 Tesseract OCR 时需要勾选你需要的语言包，并将安装后的 Tesseract-OCR 目录路径添加到环境变量 
<span data-type="code">PATH</span>
​ 中，这样思源才能直接调用 
<span data-type="code">tesseract</span>
​ 命令进行图片 OCR 提取文本。如果安装正常的话，在内核启动日志中可以搜索到 
<span data-type="code">tesseract-ocr enabled</span>
​；如果要禁用 OCR，请设置环境变量 
<span data-type="code">SIYUAN_TESSERACT_ENABLED=false</span>
​
</div>

    </div>
<div id="20230202231321-q1b1tza" data-node-id="20230202231321-q1b1tza" data-type="NodeListItem" updated="20230211103207" data-subtype="u" class="li" data-marker="*">
      <div class="protyle-action">
        <svg><use xlink:href="#iconDot"></use></svg>
      </div>
      <div id="20230202231321-5ugmgf0" data-node-id="20230202231321-5ugmgf0" data-type="NodeParagraph" updated="20230211103207" class="p">思源并不会启用所有已安装的语言包，因为语言包太多的话会导致 OCR 缓慢甚至超时返回空结果，并且占用过多的系统资源，所以默认最多只会启用 
<span data-type="code">eng</span>
​、
<span data-type="code">chi*</span>
​、
<span data-type="code">fra</span>
​、
<span data-type="code">spa</span>
​、
<span data-type="code">deu</span>
​、
<span data-type="code">rus</span>
​ 和 
<span data-type="code">osd</span>
​，如果你需要更准确的语言支持，可以通过配置环境变量 
<span data-type="code">SIYUAN_TESSERACT_LANGS</span>
​ 来指定语言包，比如 
<span data-type="code">SIYUAN_TESSERACT_LANGS=chi_sim+eng</span>
​
</div>

    </div>
<div id="20230211102440-0qik4dd" data-node-id="20230211102440-0qik4dd" data-type="NodeListItem" updated="20230211102642" data-subtype="u" class="li" data-marker="*">
      <div class="protyle-action">
        <svg><use xlink:href="#iconDot"></use></svg>
      </div>
      <div id="20230211102440-09cmf75" data-node-id="20230211102440-09cmf75" data-type="NodeParagraph" updated="20230211102642" class="p">仅支持 png 和 jpg 格式的图片
</div>

    </div>
<div id="20230211102601-ifl3ojm" data-node-id="20230211102601-ifl3ojm" data-type="NodeListItem" updated="20230211102744" data-subtype="u" class="li" data-marker="*">
      <div class="protyle-action">
        <svg><use xlink:href="#iconDot"></use></svg>
      </div>
      <div id="20230211102601-npe6hvh" data-node-id="20230211102601-npe6hvh" data-type="NodeParagraph" updated="20230211102744" class="p">默认只对 2MB 以下的图片进行处理，如果需要调整，可以通过环境变量 
<span data-type="code">SIYUAN_TESSERACT_MAX_SIZE</span>
​ 设置，值的单位是字节，比如：
<span data-type="code">SIYUAN_TESSERACT_MAX_SIZE=4000000</span>
​ 将上限调整为 4MB
</div>

    </div>
</div>
<div id="20230117002511-ex9qrjy" data-node-id="20230117002511-ex9qrjy" data-type="NodeParagraph" updated="20230117003207" class="p">图片 OCR 提取文本过程是自动在后台进行的，目前仅支持 PNG、JPG 图片。提取的文本会被用于搜索功能，这样就能通过文本关键字来定位图片。
</div>
<div id="20230414202710-a51lo76" data-node-id="20230414202710-a51lo76" data-type="NodeHeading" updated="20230414202726" data-subtype="h3" class="h3"><div>手动调整 OCR 结果
</div></div>
<div id="20230117003118-da7wjvx" data-node-id="20230117003118-da7wjvx" data-type="NodeParagraph" updated="20230414202825" class="p">OCR 的结果保存在 
<span data-type="code">工作空间/data/assets/ocr-texts.json</span>
​ 中，可通过下面的方式调整 OCR 结果：
</div>
<div id="20230414202215-wv6v759" data-node-id="20230414202215-wv6v759" data-type="NodeList" updated="20230414203014" data-subtype="u" class="list"><div id="20230414202216-6ib46sp" data-node-id="20230414202216-6ib46sp" data-type="NodeListItem" updated="20230414203014" data-subtype="u" class="li" data-marker="*">
      <div class="protyle-action">
        <svg><use xlink:href="#iconDot"></use></svg>
      </div>
      <div id="20230414202216-7lh8lft" data-node-id="20230414202216-7lh8lft" data-type="NodeParagraph" updated="20230414203014" class="p">退出思源后下在文件系统上修改该文件（请注意 JSON 格式的正确性）
</div>

    </div>
<div id="20230414202222-wbxjz0f" data-node-id="20230414202222-wbxjz0f" data-type="NodeListItem" updated="20230414202849" data-subtype="u" class="li" data-marker="*">
      <div class="protyle-action">
        <svg><use xlink:href="#iconDot"></use></svg>
      </div>
      <div id="20230414202222-oelakfd" data-node-id="20230414202222-oelakfd" data-type="NodeParagraph" updated="20230414202849" class="p">或者在编辑器中的图片元素菜单中选择 
<span data-type="kbd">OCR</span>
​
</div>

    </div>
</div>
<div id="20230414202749-qbcnypq" data-node-id="20230414202749-qbcnypq" data-type="NodeParagraph" updated="20230414202900" class="p">调整完以后需要手动重建索引。
</div>

  </div>
  <script src="../../appearance/icons/material/icon.js?2.10.5"></script>
  <script src="../../stage/build/export/protyle-method.js?2.10.5"></script>
  <script src="../../stage/protyle/js/lute/lute.min.js?2.10.5"></script>
  <script>
    window.siyuan = {
      config: {
        appearance: {
          mode: isNightTime()?1:0,//主题 明亮=0 暗黑=1
          codeBlockThemeDark: "base16/dracula",
          codeBlockThemeLight: "github",
        },
        editor: {
          codeLineWrap: true,
          codeLigatures: false,
          plantUMLServePath: "https://www.plantuml.com/plantuml/svg/~1",
          codeSyntaxHighlightLineNum: true,
          katexMacros: JSON.stringify({}),
        },
      },
      languages: { copy: "复制" },
    };
    const cdn = "../../stage/protyle";
    const previewElement = document.getElementById("preview");

    Protyle.highlightRender(previewElement, cdn);
    Protyle.mathRender(previewElement, cdn, false);
    Protyle.mermaidRender(previewElement, cdn);
    Protyle.flowchartRender(previewElement, cdn);
    Protyle.graphvizRender(previewElement, cdn);
    Protyle.chartRender(previewElement, cdn);
    Protyle.mindmapRender(previewElement, cdn);
    Protyle.abcRender(previewElement, cdn);
    Protyle.htmlRender(previewElement);
    Protyle.plantumlRender(previewElement, cdn);
    document.querySelectorAll(".protyle-action__copy").forEach((item) => {
      item.addEventListener("click", (event) => {
        navigator.clipboard.writeText(
          item.parentElement.nextElementSibling.textContent.trimEnd(),
        );
        event.preventDefault();
        event.stopPropagation();
      });
    });
  </script>
  <footer>
<p style="text-align:center;margin:15px 0;">
  技术支持：
  <a target="_blank" href="https://github.com/2234839/oceanPress_js">OceanPress</a> |
  开发者：
  <a target="_blank" href="https://heartstack.space/user/%E5%AD%90%E8%99%9A/posts">崮生（子虚）</a>
</p>
</footer>
</body>
</html>